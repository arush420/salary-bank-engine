{% extends "base.html" %}

{% block content %}
<h2>Dashboard</h2>

<p>Welcome, {{ request.user.username }} ðŸ‘‹</p>

{# Check if a company IS selected #}
{% if request.company %}

    <p><strong>Organisation:</strong> {{ request.company.organisation.name }}</p>
    <p><strong>Company:</strong> {{ request.company.name }}</p>

    <p>
        <strong>Active Company:</strong>
        {{ request.company.serial_no }}. {{ request.company.name }}
    </p>

{# If NO company is selected, show the selection list #}
{% else %}

    <div style="border:1px solid #f5c2c7; background:#fff5f5; padding:15px;">
        <p style="color:red;"><strong>No company selected.</strong></p>

        <p>Select a company to continue:</p>

        <ul>
            {% for company in request.available_companies %}
                <li>
                    <a href="{% url 'companies:select_company' company.id %}">
                        {{ company.serial_no }}. {{ company.name }}
                    </a>
                </li>
            {% empty %}
                <li>
                    No companies created yet.
                    {% if request.role == "ADMIN" %}
                        <br>
                        <a href="{% url 'companies:create_company' %}">
                            âž• Create your first company
                        </a>
                    {% endif %}
                </li>
            {% endfor %}
        </ul>
    </div>

{% endif %}

{% endblock %}