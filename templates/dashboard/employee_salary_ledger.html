{% extends "base.html" %}

{% block title %}
Salary Ledger — {{ employee.name }}
{% endblock %}

{% block content %}

<h2>Salary Ledger — {{ employee.name }} ({{ employee.emp_code }})</h2>
<div style="display:flex; gap:20px; margin:20px 0;">

    <div style="background:white; padding:15px; border-radius:8px;">
        <strong>Total Salary</strong><br>
        ₹ {{ totals.total_amount }}
    </div>

    <div style="background:white; padding:15px; border-radius:8px;">
        <strong>Processed</strong><br>
        ₹ {{ totals.processed_amount }}
    </div>

    <div style="background:white; padding:15px; border-radius:8px;">
        <strong>Pending</strong><br>
        ₹ {{ totals.pending_amount }}
    </div>

    <div style="background:white; padding:15px; border-radius:8px;">
        <strong>Hold</strong><br>
        ₹ {{ totals.hold_amount }}
    </div>

</div>

{% if transactions %}
<table style="width:100%; background:white; border-collapse:collapse; margin-top:20px;">
    <tr style="background:#f0f0f0;">
        <th style="padding:10px;">Month</th>
        <th>Year</th>
        <th>Amount</th>
        <th>Status</th>
        <th>Account</th>
        <th>UTR</th>
    </tr>

    {% for t in transactions %}
    <tr style="border-bottom:1px solid #ddd;">
        <td style="padding:10px;">{{ t.batch.month }}</td>
        <td>{{ t.batch.year }}</td>
        <td>{{ t.salary_amount }}</td>
        <td>{{ t.status }}</td>
        <td>{{ t.account_number }}</td>
        <td>{{ t.utr|default:"—" }}</td>
    </tr>
    {% endfor %}
</table>
{% else %}
<p>No salary records found.</p>
{% endif %}

{% endblock %}
